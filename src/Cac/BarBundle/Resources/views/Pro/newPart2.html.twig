{% extends '::base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" type="text/css" href="{{ asset('css/jquery.Jcrop.min.css')}}">
{% endblock %}

{% block body %}



	<div class="formBar col-xs-12 col-sm-12 col-md-12 noPadding">
		<h1>Vendez du rêve</h1>
		<div class="separation1"></div>
		<div class="separation2"></div>
	</div>
	<div class="subtitlePageRegisterBig">
		<p>Vos photos</p>

	</div>
	<div class="file_button_container">

		{{ form_start(form) }}
    		{{ form_errors(form) }}

    		    {{ form_row(form.file) }}

    		    <div class="showImg">
    		    	<img id="blah" src="#" alt="Votre image" />
    		    </div>

    	{{ form_end(form) }}

	 </div>

	<a href="{{ path("promotion_create", {'id': id }) }}">Passer cette étape</a>

{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('js/jquery.color.js') }}" type="text/javascript" /></script>
    <script src="{{ asset('js/jquery.Jcrop.min.js') }}" type="text/javascript" /></script>
    <script>
    $(document).ready(function(){
        function readURL(input) {

            if (input.files && input.files[0]) {
                var reader = new FileReader();
                var img = new Image();
                
                reader.onload = function (e) {
                    $('#blah').attr('src', e.target.result).Jcrop();
                    var image = $('#jcrop_target');
                    console.log(image);
                    var realWidth = image.get(0).naturalWidth;
                    var realHeight = image.get(0).naturalHeight;
                    console.log(realHeight + ' ' + realWidth);
                };
                
                reader.readAsDataURL(input.files[0]);
            }
        }

        $("#form_file").change(function(){
            readURL(this);
            $(".showImg").stop(true,true).show(300);
            $(".file_button_container img").stop(true,true).show(300);
        });
    });
    </script>
{% endblock %}
